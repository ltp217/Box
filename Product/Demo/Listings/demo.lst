C51 COMPILER V9.54   DEMO                                                                  09/13/2016 22:53:21 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE DEMO
OBJECT MODULE PLACED IN .\Objects\demo.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Code\demo.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\..\Include) DEFINE(FOSC_2
                    -21184) DEBUG OBJECTEXTEND PRINT(.\Listings\demo.lst) TABS(2) OBJECT(.\Objects\demo.obj)

line level    source

   1          /******************************************************************************/
   2          /*                                                                            */
   3          /*                   RTX_EX1.C:  The first RTX-51 Program                     */
   4          /*                                                                            */
   5          /******************************************************************************/
   6          
   7          #include <stdio.h>
   8          #include <rtx51tny.h>                 /* RTX-51 tiny functions & defines      */
   9          #include "N76E885.h"
  10          #include "Version.h"
  11          #include "Typedef.h"
  12          #include "Define.h"
  13          #include "Common.h"
  14          #include "SFR_Macro.h"
  15          #include "Delay.h"
  16          #include "Semaphore.h"
  17          
  18          #include "demo.h"                    /* project specific header file */
  19          
  20          bit BIT_TMP;
  21          
  22          //OVERLAY(?PR?PRINTF?PRINTF ! *)
  23          
  24          void demo_init(void)
  25          {
  26   1          /* Note
  27   1             MCU power on system clock is HIRC (22.1184MHz), so Fsys = 22.1184MHz
  28   1          */
  29   1          Set_All_GPIO_Quasi_Mode();
  30   1          InitialUART0_Timer1_Type2(9600);                            /* 9600 Baud Rate*/
  31   1      
  32   1          Show_FW_Version_Number_To_PC();
  33   1      
  34   1          printf ("\n*===================================================================");
  35   1          printf ("\n*  Name: N76E885 demo.c in UART0 Demo Code.");
  36   1          printf ("\n*===================================================================\n");  
  37   1      }
  38          
  39          /******************************************************************************/
  40          /*       Task 0 'init': Initialize                                            */
  41          /******************************************************************************/
  42          void startup_task (void) _task_ STARTUP_TASK 
  43          {    
  44   1          demo_init();
  45   1        
  46   1          init_semaphore(0, 1, 1);  
  47   1        
  48   1          os_create_task (PHASE1);            /* start task PHASE1                    */
  49   1          os_create_task (PHASE2);            /* start task PHASE2                    */
  50   1          os_delete_task (STARTUP_TASK);      /* stop init task (no longer needed)    */
  51   1      }
  52          
  53          /******************************************************************************/
  54          /*    Task 1 'phase1':                                                        */
C51 COMPILER V9.54   DEMO                                                                  09/13/2016 22:53:21 PAGE 2   

  55          /******************************************************************************/
  56          void phase1 (void) _task_  PHASE1 
  57          {
  58   1          while (1)  
  59   1          {                               /* endless loop */
  60   2              pend_semaphore(0);
  61   2              printf ("TASK # %d\n", (int)os_running_task_id ());  
  62   2              release_semaphore(0);
  63   2          }
  64   1      }
  65          
  66          /******************************************************************************/
  67          /*    Task 2 'phase2':                                                        */
  68          /******************************************************************************/
  69          void phase2 () _task_ PHASE2 
  70          {
  71   1          while (1)
  72   1          {                               /* endless loop */   
  73   2              pend_semaphore(0);
  74   2              printf ("TASK # %d\n", (int)os_running_task_id ());
  75   2              release_semaphore(0);
  76   2          }
  77   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    129    ----
   CONSTANT SIZE    =    197    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
